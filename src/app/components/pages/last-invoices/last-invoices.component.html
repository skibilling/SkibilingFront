<div class="last-invoices-container">
    <!-- Vista del formulario -->
    <div *ngIf="currentView === 'form'" class="view-container form-view">
        <app-titles 
            text="Facturas anteriores"
            color="#000">
        </app-titles>
        
        <app-simple-text
            text="Ingresa tu RFC y el correo utilizado para ver tus facturas anteriores."
            color="#666">
        </app-simple-text>
        
        <div class="form-fields">
            <app-input-field
                label="Correo electrónico *"
                placeholder="ejemplo@correo.com"
                icon="Mail.svg"
                [(value)]="email">
            </app-input-field>
            
            <app-input-field
                label="RFC *"
                placeholder="ABCD123456XX0"
                icon="Building.svg"
                [(value)]="rfc">
            </app-input-field>
        </div>
        
        <app-custom-button
            text="Ver mis facturas"
            type="primary"
            [disabled]="!isValid()"
            (click)="sendLink()">
        </app-custom-button>
    </div>
    
    <!-- Vista de procesamiento -->
    <div *ngIf="currentView === 'processing'" class="view-container processing-view">
        <div class="spinner-container">
            <div class="spinner"></div>
        </div>
        
        <app-titles 
            text="Verificando información..."
            color="#000">
        </app-titles>
        
        <app-simple-text
            text="Estamos validando tus datos. Por favor, espera un momento..."
            color="#666">
        </app-simple-text>
    </div>
    
    <!-- Vista de éxito -->
    <div *ngIf="currentView === 'success'" class="view-container success-view">
        <div class="icon-container success">
            <app-svg-icon
                icon="CheckCircle.svg"
                color="#4CAF50"
                [width]="'80px'"
                [height]="'80px'">
            </app-svg-icon>
        </div>
        
        <app-titles 
            text="¡Verificación exitosa!"
            color="#4CAF50">
        </app-titles>
        
        <app-simple-text
            text="Hemos verificado tu identidad. Ahora puedes ver tus facturas."
            color="#666">
        </app-simple-text>
        
        <app-custom-button
            text="Ver mis facturas"
            type="primary"
            (click)="showInvoicesList()">
        </app-custom-button>
    </div>
    
    <!-- Vista de lista de facturas -->
    <div *ngIf="currentView === 'list'" class="view-container list-view">
        <app-last-invoices-list></app-last-invoices-list>
        
        <div class="buttons-container">
            <app-custom-button
                text="Consultar facturas con otro equipo"
                type="secondary"
                (click)="goToOtherTeam()">
            </app-custom-button>

            <app-custom-button
                text="Regresar al inicio"
                type="primary"
                (click)="goToHome()">
            </app-custom-button>
        </div>
    </div>
    
    <!-- Vista de error -->
    <div *ngIf="currentView === 'error'" class="view-container error-view">
        <div class="icon-container error">
            <app-svg-icon
                icon="XCircle.svg"
                color="#F44336"
                [width]="'80px'"
                [height]="'80px'">
            </app-svg-icon>
        </div>
        
        <app-titles 
            text="Ha ocurrido un error"
            color="#F44336">
        </app-titles>
        
        <app-simple-text
            text="No pudimos verificar tu información. Por favor, intenta nuevamente."
            color="#666">
        </app-simple-text>
        
        <app-custom-button
            text="Reintentar"
            type="primary"
            (click)="resetForm()">
        </app-custom-button>
    </div>
    
    <!-- Vista de no encontrado -->
    <div *ngIf="currentView === 'not-found'" class="view-container not-found-view">
        <div class="icon-container error">
            <app-svg-icon
                icon="AlertCircle.svg"
                color="#F44336"
                [width]="'80px'"
                [height]="'80px'">
            </app-svg-icon>
        </div>
        
        <app-titles 
            text="No se encontraron facturas"
            color="#F44336">
        </app-titles>
        
        <app-simple-text
            text="No encontramos facturas asociadas a los datos proporcionados. Verifica la información e intenta nuevamente."
            color="#666">
        </app-simple-text>
        
        <app-custom-button
            text="Reintentar"
            type="primary"
            (click)="resetForm()">
        </app-custom-button>
    </div>
</div>